<div class="worldinfo-viewer-popup">
    <h3>å·²è§¸ç™¼çš„ä¸–ç•Œæ›¸æ¢ç›®</h3>
    <hr>

    {{#if (or global characterPrimary characterAdditional chat other)}}
        {{#if global}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸŒ</span> å…¨åŸŸä¸–ç•Œæ›¸</h4>
            {{#each global}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    <div class="wi-info-item"><strong>ç‹€æ…‹ï¼š</strong><span>{{statusName}}</span></div>
                    
                    <!-- ã€ä¿®æ”¹ã€‘ä½¿ç”¨ details æ¨™ç±¤ä¾†å‰µå»ºå¯æŠ˜ç–Šå€å¡Š -->
                    {{#if keys}}
                    <details class="wi-details">
                        <summary>ä¸»é—œéµå­—</summary>
                        <div class="wi-details-content">
                            <span>{{keys}}</span>
                        </div>
                    </details>
                    {{/if}}
                    
                    {{#if secondaryKeys}}
                    <details class="wi-details">
                        <summary>é¸å¡«éæ¿¾å™¨</summary>
                        <div class="wi-details-content">
                            <span>{{secondaryKeys}}</span>
                            <div class="wi-info-item" style="margin-top: 4px;"><strong>é‚è¼¯ï¼š</strong><span>{{selectiveLogicName}}</span></div>
                        </div>
                    </details>
                    {{/if}}

                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}{{depthText}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        <!-- ä»¥ä¸‹å°æ‰€æœ‰åˆ†é¡é‡è¤‡ç›¸åŒçš„ä¿®æ”¹ -->

        {{#if characterPrimary}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ‘¤</span> è§’è‰²ä¸»è¦çŸ¥è­˜æ›¸</h4>
            {{#each characterPrimary}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    <div class="wi-info-item"><strong>ç‹€æ…‹ï¼š</strong><span>{{statusName}}</span></div>
                    {{#if keys}}
                    <details class="wi-details">
                        <summary>ä¸»é—œéµå­—</summary>
                        <div class="wi-details-content">
                            <span>{{keys}}</span>
                        </div>
                    </details>
                    {{/if}}
                    {{#if secondaryKeys}}
                    <details class="wi-details">
                        <summary>é¸å¡«éæ¿¾å™¨</summary>
                        <div class="wi-details-content">
                            <span>{{secondaryKeys}}</span>
                            <div class="wi-info-item" style="margin-top: 4px;"><strong>é‚è¼¯ï¼š</strong><span>{{selectiveLogicName}}</span></div>
                        </div>
                    </details>
                    {{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}{{depthText}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if characterAdditional}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ“š</span> è§’è‰²é¡å¤–çŸ¥è­˜æ›¸</h4>
            {{#each characterAdditional}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    <div class="wi-info-item"><strong>ç‹€æ…‹ï¼š</strong><span>{{statusName}}</span></div>
                    {{#if keys}}
                    <details class="wi-details">
                        <summary>ä¸»é—œéµå­—</summary>
                        <div class="wi-details-content">
                            <span>{{keys}}</span>
                        </div>
                    </details>
                    {{/if}}
                    {{#if secondaryKeys}}
                    <details class="wi-details">
                        <summary>é¸å¡«éæ¿¾å™¨</summary>
                        <div class="wi-details-content">
                            <span>{{secondaryKeys}}</span>
                            <div class="wi-info-item" style="margin-top: 4px;"><strong>é‚è¼¯ï¼š</strong><span>{{selectiveLogicName}}</span></div>
                        </div>
                    </details>
                    {{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}{{depthText}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if chat}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ’¬</span> èŠå¤©çŸ¥è­˜æ›¸</h4>
            {{#each chat}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    <div class="wi-info-item"><strong>ç‹€æ…‹ï¼š</strong><span>{{statusName}}</span></div>
                    {{#if keys}}
                    <details class="wi-details">
                        <summary>ä¸»é—œéµå­—</summary>
                        <div class="wi-details-content">
                            <span>{{keys}}</span>
                        </div>
                    </details>
                    {{/if}}
                    {{#if secondaryKeys}}
                    <details class="wi-details">
                        <summary>é¸å¡«éæ¿¾å™¨</summary>
                        <div class="wi-details-content">
                            <span>{{secondaryKeys}}</span>
                            <div class="wi-info-item" style="margin-top: 4px;"><strong>é‚è¼¯ï¼š</strong><span>{{selectiveLogicName}}</span></div>
                        </div>
                    </details>
                    {{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}{{depthText}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if other}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ“¦</span> å…¶ä»–</h4>
            {{#each other}}
             <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                     <div class="wi-info-item"><strong>ç‹€æ…‹ï¼š</strong><span>{{statusName}}</span></div>
                     {{#if keys}}
                     <details class="wi-details">
                         <summary>ä¸»é—œéµå­—</summary>
                         <div class="wi-details-content">
                             <span>{{keys}}</span>
                         </div>
                     </details>
                     {{/if}}
                     {{#if secondaryKeys}}
                     <details class="wi-details">
                         <summary>é¸å¡«éæ¿¾å™¨</summary>
                         <div class="wi-details-content">
                             <span>{{secondaryKeys}}</span>
                             <div class="wi-info-item" style="margin-top: 4px;"><strong>é‚è¼¯ï¼š</strong><span>{{selectiveLogicName}}</span></div>
                         </div>
                     </details>
                     {{/if}}
                     <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

    {{else}}
        <div class="wi-no-entries">
            <p>â„¹ï¸ æ²’æœ‰åµæ¸¬åˆ°ä»»ä½•è§¸ç™¼çš„ä¸–ç•Œæ›¸æ¢ç›®ã€‚</p>
        </div>
    {{/if}}
</div>
