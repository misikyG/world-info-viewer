<div class="worldinfo-viewer-popup">
  <h3>ğŸŒ ä¸–ç•Œæ›¸è§¸ç™¼æª¢è¦–</h3>
  
  {{#if positions.length}}
    {{#each positions}}
      <div class="wi-position-group">
        <!-- æ’å…¥ä½ç½®æ¨™é¡Œ -->
        <h4 class="wi-position-header">
          <span class="wi-emoji">{{this.positionEmoji}}</span>
          <span class="wi-position-name">{{this.positionName}}</span>
        </h4>
        
        <!-- è©²ä½ç½®ä¸‹çš„æ‰€æœ‰æ¢ç›® -->
        <div class="wi-entries-container">
          {{#each this.entries}}
            <div class="wi-entry">
              <!-- æ¢ç›®æ¨™é¡Œè¡Œ -->
              <div class="wi-entry-header">
                <div class="wi-title-line">
                  {{#if ../isDepthBased}}
                    <!-- ä¾æ·±åº¦æ’å…¥ï¼šé¡¯ç¤ºèº«åˆ†å’Œæ·±åº¦ -->
                    <span class="wi-depth-info">@ {{this.roleDisplay}} æ·±åº¦{{this.depth}}</span>
                    <span class="wi-separator">|</span>
                  {{/if}}
                  <span class="wi-source">{{this.sourceName}}</span>
                  <span class="wi-separator">|</span>
                  <span class="wi-world">{{this.worldName}}</span>
                  <span class="wi-separator">|</span>
                  <span class="wi-entry-name">{{this.entryName}}</span>
                  <span class="wi-separator">|</span>
                  <span class="wi-emoji">{{this.statusEmoji}}</span>
                </div>
              </div>
              
              <!-- æ¢ç›®è³‡è¨Š -->
              <div class="wi-entry-info">
                {{#if this.statusName}}
                  <div class="wi-info-item">
                    <strong>ç‹€æ…‹:</strong>
                    <span>{{this.statusName}}</span>
                  </div>
                {{/if}}
              </div>
              
              <!-- ä¸»é—œéµå­—ï¼ˆæ‘ºç–Šï¼‰ -->
              {{#if this.keys}}
                <details class="wi-details">
                  <summary>ä¸»é—œéµå­—</summary>
                  <div class="wi-details-content">
                    <pre>{{this.keys}}</pre>
                  </div>
                </details>
              {{/if}}
              
              <!-- é¸å¡«éæ¿¾å™¨ï¼ˆæ‘ºç–Šï¼‰ -->
              {{#if this.secondaryKeys}}
                <details class="wi-details">
                  <summary>é¸å¡«éæ¿¾å™¨</summary>
                  <div class="wi-details-content">
                    <div class="wi-info-item">
                      <strong>é‚è¼¯:</strong>
                      <span>{{this.selectiveLogicName}}</span>
                    </div>
                    <pre>{{this.secondaryKeys}}</pre>
                  </div>
                </details>
              {{/if}}
              
              <!-- å…§å®¹ -->
              <div class="wi-entry-content">
                <strong>å…§å®¹:</strong>
                <pre>{{this.content}}</pre>
              </div>
            </div>
          {{/each}}
        </div>
      </div>
    {{/each}}
  {{else}}
    <div class="wi-no-entries">
      <p>æ­¤è¨Šæ¯æ²’æœ‰è§¸ç™¼ä»»ä½•ä¸–ç•Œæ›¸ã€‚</p>
    </div>
  {{/if}}
</div>
