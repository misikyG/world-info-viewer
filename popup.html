<div class="worldinfo-viewer-popup">
    <h3>å·²è§¸ç™¼çš„ä¸–ç•Œæ›¸æ¢ç›®</h3>
    <hr>

    {{! åªæœ‰ç•¶ä»»ä½•ä¸€å€‹åˆ†é¡æœ‰å…§å®¹æ™‚ï¼Œæ‰é¡¯ç¤ºä¸‹é¢çš„å€å¡Š }}
    {{#if (or global.length characterPrimary.length characterExtra.length chat.length persona.length other.length)}}

        {{#if global.length}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸŒ</span> å…¨åŸŸä¸–ç•Œæ›¸</h4>
            {{#each global}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    {{#if keys}}<div class="wi-info-item"><strong>ä¸»é—œéµå­—ï¼š</strong><span>{{keys}}</span></div>{{/if}}
                    {{#if secondaryKeys}}<div class="wi-info-item"><strong>éæ¿¾å™¨ï¼š</strong><span>{{secondaryKeys}}</span></div>{{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{!-- ã€ä¿®æ”¹ã€‘å°‡ character æ”¹ç‚º characterPrimary --}}
        {{#if characterPrimary.length}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ‘¤</span> è§’è‰²ä¸»è¦çŸ¥è­˜æ›¸</h4>
            {{#each characterPrimary}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    {{#if keys}}<div class="wi-info-item"><strong>ä¸»é—œéµå­—ï¼š</strong><span>{{keys}}</span></div>{{/if}}
                    {{#if secondaryKeys}}<div class="wi-info-item"><strong>éæ¿¾å™¨ï¼š</strong><span>{{secondaryKeys}}</span></div>{{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}
        
        {{!-- ã€æ–°å¢ã€‘è§’è‰²é¡å¤–çŸ¥è­˜æ›¸ --}}
        {{#if characterExtra.length}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ“š</span> è§’è‰²é¡å¤–çŸ¥è­˜æ›¸</h4>
            {{#each characterExtra}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    {{#if keys}}<div class="wi-info-item"><strong>ä¸»é—œéµå­—ï¼š</strong><span>{{keys}}</span></div>{{/if}}
                    {{#if secondaryKeys}}<div class="wi-info-item"><strong>éæ¿¾å™¨ï¼š</strong><span>{{secondaryKeys}}</span></div>{{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if chat.length}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ’¬</span> èŠå¤©å°ˆå±¬çŸ¥è­˜æ›¸</h4>
            {{#each chat}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    {{#if keys}}<div class="wi-info-item"><strong>ä¸»é—œéµå­—ï¼š</strong><span>{{keys}}</span></div>{{/if}}
                    {{#if secondaryKeys}}<div class="wi-info-item"><strong>éæ¿¾å™¨ï¼š</strong><span>{{secondaryKeys}}</span></div>{{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}{{#if depth}} / æ·±åº¦ {{depth}}{{/if}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{!-- ã€æ–°å¢ã€‘ä½¿ç”¨è€…äººè¨­çŸ¥è­˜æ›¸ --}}
        {{#if persona.length}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ­</span> ä½¿ç”¨è€…äººè¨­çŸ¥è­˜æ›¸</h4>
            {{#each persona}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                    {{#if keys}}<div class="wi-info-item"><strong>ä¸»é—œéµå­—ï¼š</strong><span>{{keys}}</span></div>{{/if}}
                    {{#if secondaryKeys}}<div class="wi-info-item"><strong>éæ¿¾å™¨ï¼š</strong><span>{{secondaryKeys}}</span></div>{{/if}}
                    <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

        {{#if other.length}}
        <div class="wi-category">
            <h4><span class="wi-emoji">ğŸ“¦</span> å…¶ä»–</h4>
            {{#each other}}
            <div class="wi-entry">
                <div class="wi-entry-header">
                    <span class="wi-emoji">{{emoji}}</span>
                    <span class="wi-title">{{worldName}} / {{entryName}}</span>
                </div>
                <div class="wi-entry-info">
                     <div class="wi-info-item"><strong>æ’å…¥ä½ç½®ï¼š</strong><span>{{position}}</span></div>
                </div>
                <div class="wi-entry-content">
                    <strong>å…§å®¹ï¼š</strong>
                    <pre>{{content}}</pre>
                </div>
            </div>
            {{/each}}
        </div>
        {{/if}}

    {{else}}
        <div class="wi-no-entries">
            <p>â„¹ï¸ æ²’æœ‰åµæ¸¬åˆ°ä»»ä½•è§¸ç™¼çš„ä¸–ç•Œæ›¸æ¢ç›®ã€‚</p>
        </div>
    {{/if}}
</div>
